#!/bin/bash

# Unified Development Environment Launcher

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

case "$1" in
  "start"|"")
    # Start HTTP development in Docker
    exec "$SCRIPT_DIR/scripts/dev-docker.sh" "${@:2}"
    ;;
  "https")
    # Start HTTPS development in Docker
    exec "$SCRIPT_DIR/scripts/dev-docker.sh" --https "${@:2}"
    ;;
  "stop")
    echo "ðŸ›‘ Stopping all development services..."
    cd "$SCRIPT_DIR"
    docker-compose down 2>/dev/null || true
    echo "âœ… All services stopped!"
    ;;
  *)
    echo "Usage: $0 [start|https|stop] [options]"
    echo ""
    echo "Commands:"
    echo "  start (default)  Start HTTP development environment in Docker"
    echo "  https           Start HTTPS development environment in Docker"
    echo "  stop            Stop all development services"
    echo ""
    echo "Examples:"
    echo "  $0              # Start HTTP development server"
    echo "  $0 start        # Start HTTP development server"
    echo "  $0 https        # Start HTTPS server for mobile camera testing"
    echo "  $0 stop         # Stop everything"
    echo ""
    echo "ðŸ“± For mobile camera testing:"
    echo "   Use '$0 https' to enable HTTPS with local certificates"
    echo "   This allows camera access on mobile devices"
    echo ""
    echo "ðŸ”§ Additional options:"
    echo "   --no-logs       Don't show container logs after startup"
    exit 1
    ;;
esac